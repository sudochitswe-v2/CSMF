@using CSMF.WebMvc.Extensions
@model DashboardViewModel

@{
    ViewData["Title"] = "Dashboard";
}


<div class="row">
    <div class="col-md-3">
        <div class="card bg-primary text-white p-3">
            <h6>Total Loans</h6>
            <p>@Model.TotalLoans</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-success text-white p-3">
            <h6>Customers</h6>
            <p>@Model.TotalCustomers</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-warning text-dark p-3">
            <h6>Outstanding Principal</h6>
            <p>@Model.OutstandingPrincipal.ToString("N0")</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-info text-white p-3">
            <h6>Total Collected</h6>
            <p>@Model.TotalCollected.ToString("N0")</p>
        </div>
    </div>
</div>

<hr />

<div class="row mt-3">
    <div class="col-md-6">
        <div class="card bg-danger text-white p-3">
            <h6>Overdue Installments</h6>
            <p>@Model.OverdueInstallments</p>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card bg-secondary text-white p-3">
            <h6>Fees Collected</h6>
            <p>@Model.TotalFeesCollected.ToString("N0")</p>
        </div>
    </div>
</div>

<hr />

<h4> Upcoming Repayments (Next 7 Days)</h4>
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Loan ID</th>
            <th>Installment</th>
            <th>Due Date</th>
            <th>Total Amount</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var r in Model.UpcomingRepayments)
        {
            <tr>
                <td>@r.LoanApplicationId</td>
                <td>@r.InstallmentNumber</td>
                <td>@r.DueDate.ToShortDateString()</td>
                <td>@r.TotalAmount.ToString("N0")</td>

                <td>
                    <span class="badge @r.Status.ToPaymentStatusBootstrapClass()">@r.Status</span>
                </td>
            </tr>
        }
    </tbody>
</table>
